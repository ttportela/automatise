<!DOCTYPE html>
<html>
<head>  <link rel="stylesheet" href="css/notebook.css">  <link rel="stylesheet" href="css/colorful.css">  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"></head>
<body><div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <h1 id="Automatize-Sample-Code">
    Automatize Sample Code
    <a class="anchor-link" href="#Automatize-Sample-Code">
     ¶
    </a>
   </h1>
   <p>
    Sample Code in python to use Automatize as a python library.
   </p>
   <p>
    <button type="button" class="btn btn-primary">Download Notebook</button>
   </p>
   <p>
    <strong>
     Observations:
    </strong>
   </p>
   <ul>
    <li>
     Not yet compatible with windows, only linux shell
    </li>
   </ul>
   <hr/>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <h3 id="1.-Paths-Configurations">
    1. Paths Configurations
    <a class="anchor-link" href="#1.-Paths-Configurations">
     ¶
    </a>
   </h3>
   <p>
    You can use configured paths if you want to move directories
   </p>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [1]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">root</span>     <span class="o">=</span> <span class="s1">'./'</span>
<span class="c1"># We consider this folder organization to the experimental enviromnent:</span>
<span class="n">prg_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">'programs'</span><span class="p">)</span>
<span class="n">data</span>     <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">'data'</span><span class="p">)</span>
<span class="n">res_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">'results'</span><span class="p">)</span>
</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <h3 id="2.-Pre-processing-data">
    2. Pre-processing data
    <a class="anchor-link" href="#2.-Pre-processing-data">
     ¶
    </a>
   </h3>
   <p>
    To use helpers for data pre-processing, import from package
    <code>
     automatize
    </code>
    the script
    <code>
     preprocessing.py
    </code>
    :
   </p>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [ ]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="kn">from</span> <span class="nn">automatize.preprocessing</span> <span class="kn">import</span> <span class="o">*</span>
</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <p>
    The
    <strong>
     preprocessing
    </strong>
    module provides some functions to work data:
   </p>
   <p>
    Basic functions:
   </p>
   <ul>
    <li>
     <code>
      readDataset
     </code>
     :
    </li>
    <li>
     <code>
      printFeaturesJSON
     </code>
     :
    </li>
    <li>
     <code>
      datasetStatistics
     </code>
     :
    </li>
   </ul>
   <p>
    Train and Test split functions:
   </p>
   <ul>
    <li>
     <code>
      trainAndTestSplit
     </code>
     :
    </li>
    <li>
     <code>
      kfold_trainAndTestSplit
     </code>
     :
    </li>
    <li>
     <code>
      stratify
     </code>
     :
    </li>
    <li>
     <code>
      joinTrainAndTest
     </code>
     :
    </li>
   </ul>
   <p>
    Type convertion functions:
   </p>
   <ul>
    <li>
     <code>
      convertDataset
     </code>
     :
    </li>
    <li>
     <code>
      zip2df
     </code>
     :
    </li>
    <li>
     <code>
      zip2csv
     </code>
     :
    </li>
    <li>
     <code>
      df2zip
     </code>
     :
    </li>
    <li>
     <code>
      zip2arf
     </code>
     :
    </li>
    <li>
     <code>
      any2ts
     </code>
     :
    </li>
    <li>
     <code>
      xes2csv
     </code>
     :
    </li>
    <li>
     <code>
      df2mat
     </code>
     :
    </li>
   </ul>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [ ]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="n">dir_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">'foursquare_global'</span><span class="p">)</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'tid'</span><span class="p">,</span><span class="s1">'label'</span><span class="p">,</span><span class="s1">'lat'</span><span class="p">,</span><span class="s1">'lon'</span><span class="p">,</span><span class="s1">'day'</span><span class="p">,</span><span class="s1">'hour'</span><span class="p">,</span><span class="s1">'poi'</span><span class="p">,</span><span class="s1">'category'</span><span class="p">,</span><span class="s1">'price'</span><span class="p">,</span><span class="s1">'rating'</span><span class="p">]</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">joinTrainAndTest</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">train_file</span><span class="o">=</span><span class="s2">"specific_train.csv"</span><span class="p">,</span> <span class="n">test_file</span><span class="o">=</span><span class="s2">"specific_test.csv"</span><span class="p">,</span> <span class="n">class_col</span> <span class="o">=</span> <span class="s1">'label'</span><span class="p">)</span>
<span class="n">df</span>
</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <p>
    To k-fold split a dataset into train and test:
   </p>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [ ]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="n">k</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">kfold_trainAndTestSplit</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">random_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">class_col</span><span class="o">=</span><span class="s1">'label'</span><span class="p">)</span>
</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <h3 id="2.-Scripting">
    2. Scripting
    <a class="anchor-link" href="#2.-Scripting">
     ¶
    </a>
   </h3>
   <p>
    To run feature extraction methods, import from package
    <code>
     automatize
    </code>
    the script
    <code>
     run.py
    </code>
    or
    <code>
     script.py
    </code>
    :
   </p>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [2]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">automatize.script</span> <span class="kn">import</span> <span class="o">*</span>
</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <p>
    The
    <code>
     gensh
    </code>
    function is the statring point to generate scripts for the available methods:
   </p>
   <ul>
    <li>
     <code>
      method
     </code>
     : method name to generate the scripts;
    </li>
    <li>
     <code>
      datasets
     </code>
     : dictionary for datasets config, with
     <ul>
      <li>
       key: Dataset Name + . + Descriptor JSON file prefix ()
      </li>
      <li>
       value: list of subsets (the second part of JSON descriptor name)
      </li>
     </ul>
    </li>
    <li>
     <code>
      params
     </code>
     : dictionary of configuration parameters for scripting (described later)
    </li>
   </ul>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [4]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="n">method</span> <span class="o">=</span> <span class="s1">'hiper'</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'Animals.RawTraj'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'specific'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'sh_folder'</span><span class="p">:</span> <span class="s1">'scripts'</span><span class="p">,</span>      <span class="c1"># where to generate script files</span>
    <span class="s1">'folder'</span><span class="p">:</span>    <span class="s1">'EXP2022'</span><span class="p">,</span>      <span class="c1"># folder prefix for result files</span>
    <span class="s1">'k'</span><span class="p">:</span>         <span class="mi">5</span><span class="p">,</span>              <span class="c1"># number of folds - optional</span>
    <span class="s1">'root'</span><span class="p">:</span>      <span class="n">root</span><span class="p">,</span>           <span class="c1"># root folder of the experimental environment</span>
    <span class="s1">'threads'</span><span class="p">:</span>   <span class="mi">10</span><span class="p">,</span>             <span class="c1"># number of threads allowed (for movelets methods) - optional</span>
    <span class="s1">'gig'</span><span class="p">:</span>       <span class="mi">100</span><span class="p">,</span>            <span class="c1"># GB of RAM memory limit allowed (for movelets methods) - optional</span>
    <span class="s1">'pyname'</span><span class="p">:</span> <span class="s1">'python3'</span><span class="p">,</span>         <span class="c1"># Python command - optional</span>
    
    <span class="s1">'runopts'</span><span class="p">:</span> <span class="s1">'-TR 0.5'</span><span class="p">,</span>        <span class="c1"># other arguments to pass to the method line (-TR is the τ for HiPerMovelets) - optional</span>
    <span class="s1">'timeout'</span><span class="p">:</span> <span class="s1">'7d'</span><span class="p">,</span>             <span class="c1"># set a timeout to methods runtime (7d limits to 7 days)</span>
<span class="p">}</span>

<span class="n">gensh</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">datasets</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
</pre>
    </div>
   </div>
  </div>
 </div>
 <div class="output_wrapper">
  <div class="output">
   <div class="output_area">
    <div class="prompt">
    </div>
    <div class="output_subarea output_stream output_stdout output_text">
     <pre>sh run-H-Animals-specific-10T.sh
</pre>
    </div>
   </div>
   <div class="output_area">
    <div class="prompt output_prompt">
     Out[4]:
    </div>
    <div class="output_text output_subarea output_execute_result">
     <pre>'sh run-H-Animals-specific-10T.sh\n'</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <p>
    The available methods in automatize are declared here:
   </p>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [5]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="kn">from</span> <span class="nn">automatize.helper.script_inc</span> <span class="kn">import</span> <span class="n">BASE_METHODS</span><span class="p">,</span> <span class="n">METHODS_NAMES</span>

<span class="k">for</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">BASE_METHODS</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="s1">''</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">25</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">method</span><span class="p">),</span> <span class="s1">' '</span><span class="p">),</span> <span class="n">METHODS_NAMES</span><span class="p">[</span><span class="n">method</span><span class="p">])</span>
</pre>
    </div>
   </div>
  </div>
 </div>
 <div class="output_wrapper">
  <div class="output">
   <div class="output_area">
    <div class="prompt">
    </div>
    <div class="output_subarea output_stream output_stdout output_text">
     <pre>MARC                       MARC
npoi                       NPOI-F
MM                         MASTERMovelets
MM+Log                     MASTERMovelets-Log
SM                         SUPERMovelets
SM-2                       SUPERMovelets-λ
SM+Log                     SUPERMovelets-Log
SM-2+Log                   SUPERMovelets-Log-λ
hiper                      HiPerMovelets
hiper-pivots               HiPerMovelets-Pivots
hiper+Log                  HiPerMovelets-Log
hiper-pivots+Log           HiPerMovelets-Pivots-Log
</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <h3 id="3.-Classification">
    3. Classification
    <a class="anchor-link" href="#3.-Classification">
     ¶
    </a>
   </h3>
   <p>
    To run classifiers for the HIPERMovelets results, import from package
    <code>
     automatize
    </code>
    the script analysis.py:
   </p>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [ ]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="kn">from</span> <span class="nn">automatize.analysis</span> <span class="kn">import</span> <span class="n">def_random_seed</span><span class="p">,</span> <span class="n">ACC4All</span><span class="p">,</span> <span class="n">ALL3</span><span class="p">,</span> <span class="n">MLP</span><span class="p">,</span> <span class="n">RF</span><span class="p">,</span> <span class="n">SVM</span><span class="p">,</span> <span class="n">results2df</span><span class="p">,</span> <span class="n">printLatex</span>
</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <p>
    This defines a random and a seed numbers for classifyers
   </p>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [ ]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="n">save_results</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">def_random_seed</span><span class="p">(</span><span class="n">random_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">seed_num</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <hr/>
   <p>
    a. To run the classifyers for each folder inside a result path prefix:
   </p>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [ ]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="n">ACC4All</span><span class="p">(</span><span class="n">res_path</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">save_results</span><span class="p">)</span>
</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <p>
    b. To run the classifyers for a especific result forder:
   </p>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [ ]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="n">ALL3</span><span class="p">(</span><span class="n">res_path</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">method_name</span><span class="p">)</span>
</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <p>
    c. To run a specific classifyer:
   </p>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [ ]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="n">MLP</span><span class="p">(</span><span class="n">res_path</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">method_name</span><span class="p">)</span>
</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <h3 id="4.-Exporting-Results">
    4. Exporting Results
    <a class="anchor-link" href="#4.-Exporting-Results">
     ¶
    </a>
   </h3>
   <p>
    To run classifiers for the HIPERMovelets results, import from package
    <code>
     automatize
    </code>
    the script analysis.py:
   </p>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [ ]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">results2df</span><span class="p">(</span><span class="n">res_path</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span>
<span class="n">df</span>
</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <hr/>
   <p>
    To print the dataframe result in a Latex formatted table:
   </p>
  </div>
 </div>
</div>
<div class="cell border-box-sizing code_cell rendered">
 <div class="input">
  <div class="prompt input_prompt">
   In [ ]:
  </div>
  <div class="inner_cell">
   <div class="input_area">
    <div class="highlight hl-ipython3">
     <pre><span></span><span class="n">printLatex</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre>
    </div>
   </div>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <h3 id="5.-Visualizing-Movelets">
    5. Visualizing Movelets
    <a class="anchor-link" href="#5.-Visualizing-Movelets">
     ¶
    </a>
   </h3>
   <p>
    TODO
   </p>
  </div>
 </div>
</div>
<div class="cell border-box-sizing text_cell rendered">
 <div class="prompt input_prompt">
 </div>
 <div class="inner_cell">
  <div class="text_cell_render border-box-sizing rendered_html">
   <p>
    # By Tarlis Portela (2020)
   </p>
  </div>
 </div>
</div>

</body>
</html>